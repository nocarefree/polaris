import{d as I,r,h as L,c as d,w as t,u as e,k as q,o as s,a,l as N,m as S,I as T,n as h,p as V,q as p,s as g,N as $,b as i,t as f,x as R,v as U,F as x,Q as M,z as Z,A as z,B as O,ac as P}from"./index.37e0b10d.js";import{r as Q}from"./request.aad27b89.js";import{_ as j}from"./SkeletonList.vue_vue_type_script_setup_true_lang.fbb2f726.js";const W=I({__name:"TaskExportLogs",setup(G){const y=q(),v=r(!0),E={singular:"logs",plural:"logs"},w=[],n=L({total:0,data:[]}),k=r([]),F=r(0),A=[{id:"1",content:"\u5168\u90E8"},{id:"2",content:"\u5BFC\u51FA\u4E2D"},{id:"3",content:"\u5DF2\u5B8C\u6210"}],_=r([]),C=[{label:"\u4EFB\u52A1\u53F7",value:"task asc",directionLabel:"Ascending"},{label:"\u4EFB\u52A1\u53F7",value:"task desc",directionLabel:"Descending"},{label:"\u72B6\u6001",value:"status asc",directionLabel:"A-Z"},{label:"\u72B6\u6001",value:"status desc",directionLabel:"A-Z"}],m=r("");return Q.get("/export_logs").then(c=>{n.data=c.data,n.total=c.total,v.value=!1}),(c,o)=>v.value?(s(),d(j,{key:0})):(s(),d(e(O),{key:1,title:"\u5BFC\u51FA\u65E5\u5FD7","full-width":""},{default:t(()=>[a(e(z),{padding:"0"},{default:t(()=>{var b;return[((b=n==null?void 0:n.data)==null?void 0:b.length)>0?(s(),N(x,{key:0},[a(e(S),{mode:e(T).Default,selected:F.value,"onUpdate:selected":o[0]||(o[0]=u=>F.value=u),tabs:A,"sort-selected":_.value,"onUpdate:sortSelected":o[1]||(o[1]=u=>_.value=u),"sort-options":C,"query-value":m.value,"onUpdate:queryValue":o[2]||(o[2]=u=>m.value=u),filters:w,"can-create-new-view":""},null,8,["mode","selected","sort-selected","query-value"]),a(e(h),{"resource-name":E,headings:[{title:"ID"},{title:"\u4EFB\u52A1\u540D"},{title:"\u6587\u4EF6"}],rows:n.data},{default:t(({index:u,row:l})=>[a(e(V),{id:l.id,selected:k.value=="All"||k.value.includes(l.id),position:u},{default:t(()=>[a(e(p),null,{default:t(()=>[a(e(g),{variant:"bodyMd","font-weight":"bold",as:"span"},{default:t(()=>[a(e($),{variant:"plain",onClick:B=>e(y).push(`/task/${l.id}`)},{default:t(()=>[i("#"+f(l.id),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),a(e(p),null,{default:t(()=>[a(e(g),null,{default:t(()=>[i(f(l.task.name),1)]),_:2},1024)]),_:2},1024),a(e(p),null,{default:t(()=>[l.status=="running"?(s(),d(e(R),{key:0,tone:"attention"},{default:t(()=>[i("\u8FD0\u884C\u4E2D")]),_:1})):(s(),d(e(U),{key:1,gap:"200","block-align":"center"},{default:t(()=>[(s(!0),N(x,null,M(l.files,(B,D)=>(s(),d(e(P),{url:B,target:"_blank"},{default:t(()=>[i(f(`\u6587\u4EF6${D+1}`),1)]),_:2},1032,["url"]))),256))]),_:2},1024))]),_:2},1024)]),_:2},1032,["id","selected","position"])]),_:1},8,["rows"])],64)):(s(),d(e(Z),{key:1,heading:"\u6CA1\u6709\u4EFB\u4F55\u8BB0\u5F55"}))]}),_:1})]),_:1}))}});export{W as default};
