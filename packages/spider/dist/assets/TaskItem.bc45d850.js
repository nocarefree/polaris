import{r as v}from"./request.aad27b89.js";import{d as k,r as d,l as B,a,u as e,w as t,F as A,k as N,o as i,L as D,M as g,G as y,c as F,O as h,P as V,Q as b,H as c,y as L,R as E,S as C,T as S,U as x,V as T,B as P,W as $,b as U,t as w}from"./index.37e0b10d.js";const G=k({__name:"TaskItem",setup(I){const p=N(),s=d([]),r=d({onAction:()=>{let u=[];l.value.name||u.push({key:"name",content:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}),l.value.process||u.push({key:"process",content:"\u7EBF\u7A0B\u4E0D\u80FD\u4E3A\u7A7A"}),s.value=u,u.length==0&&(r.value.loading=!0,(l.value.id?v.put(`tasks/${l.value.id}`,{...l.value}):v.post("tasks",{...l.value})).then(({id:o})=>{if(o)return p.push("/tasks")}).finally(()=>{r.value.loading=!1}))},content:"\u4FDD\u5B58",loading:!1,disabled:!1}),l=d({id:"",name:"",process:""}),f=[];for(let u=1;u<10;u++)f.push({value:`${u}`,label:`${u}`});const _=()=>{p.back()},m=u=>{const o=s.value.find(n=>n.key==u);return o?o.content:void 0};return(u,o)=>(i(),B(A,null,[a(e(D),{message:"\u672A\u4FDD\u5B58\u4EA7\u54C1","save-action":r.value,"discard-action":{content:"\u53D6\u6D88",discardConfirmationModal:!0,onAction:_}},null,8,["save-action","discard-action"]),a(e(P),{title:l.value.id?"\u4FEE\u6539\u4EFB\u52A1":"\u6DFB\u52A0\u4EFB\u52A1","back-action":{content:"Products",url:"/tasks"}},{default:t(()=>[a(e(g),{action:"post"},{default:t(()=>[a(e(y),null,{default:t(()=>[s.value.length>0?(i(),F(e(c),{key:0},{default:t(()=>[a(e(h),{tone:"critical",title:`\u6B64\u5904\u6709${s.value.length}\u4E2A\u95EE\u9898`},{default:t(()=>[a(e(V),null,{default:t(()=>[(i(!0),B(A,null,b(s.value,n=>(i(),F(e($),null,{default:t(()=>[U(w(n.content),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["title"])]),_:1})):L("",!0),a(e(c),null,{default:t(()=>[a(e(E),{sectioned:""},{default:t(()=>[a(e(C),null,{default:t(()=>[a(e(S),{label:"\u4EFB\u52A1\u540D",modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value.name=n),placeholder:"\u8BF7\u586B\u5199\u540D\u79F0",error:m("name")},null,8,["modelValue","error"])]),_:1})]),_:1})]),_:1}),a(e(c),{variant:"oneThird"},{default:t(()=>[a(e(E),{title:"\u7EBF\u7A0B",sectioned:""},{default:t(()=>[a(e(x),{modelValue:l.value.process,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value.process=n),"label-hidden":"",placeholder:"\u8BF7\u9009\u62E9\u7EBF\u7A0B",label:"process",options:f,error:m("process")},null,8,["modelValue","error"])]),_:1})]),_:1}),a(e(c),null,{default:t(()=>[a(e(T),{"primary-action":r.value},null,8,["primary-action"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])],64))}});export{G as default};
